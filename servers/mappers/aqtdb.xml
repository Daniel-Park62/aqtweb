<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="aqtdb">  
  <select id="tmaster_ListUid">
    SELECT code, desc1 name, cmpcode,enddate  from tmaster m join 
             (select apps from taqtuser where usrid = #{uid}) u 
      where m.appid rlike u.apps
  </select>
  <select id="tmaster_ListAll">
    SELECT a.*, a.desc1 name, 0 as chk from tmaster a 
  </select>
  <insert id="tmaster_Ins">
    INSERT INTO tmaster  (code, appid, lvl, desc1, cmpCode, tdate, endDate, tdir, tuser, thost, tport, tenv,pro) 
                VALUES (#{code}, #{appid}, #{lvl}, #{desc1},
                        #{cmpCode}, #{tdate}, #{endDate}, #{tdir}, 
                        #{tuser}, #{thost}, #{tport}, #{tenv},#{pro})
  </insert>
  <update id="tmaster_Upd">
    UPDATE tmaster SET 
	          appid=#{appid}, lvl=#{lvl}, desc1=#{desc1}, cmpCode=#{cmpCode}, tdate=#{tdate}, endDate=#{endDate}, 
            tdir=#{tdir}, tuser=#{tuser}, thost=#{thost}, tport=#{tport}, tenv=#{tenv},pro=#{pro}
       WHERE CODE = #{code} 
  </update>
  <delete id="tmaster_Del">
    delete from tmaster 
    <where>
      <foreach item="item" collection="list"
          open="code in (" separator="," close=")" >
            #{item}
      </foreach>
    </where>
  </delete>
  <delete id="ttcppacket_Erase">
    delete from ttcppacket 
    <where>
      <foreach item="item" collection="list"
          open="tcode in (" separator="," close=")" >
            #{item}
      </foreach>
    </where>
  </delete>
</mapper>